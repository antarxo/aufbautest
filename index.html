<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aufbau Διάγραμμα</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; }
        canvas { display: block; margin: auto; }
    </style>
</head>
<body>
    <h1>Aufbau Διάγραμμα</h1>
    <label for="atomicNumber">Ατομικός Αριθμός:</label>
    <input type="number" id="atomicNumber" min="1" max="118" value="1">
    <button onclick="startFilling()">Ξεκίνα Δόμηση</button>
    <script>
        let orbitals = [
            ["1s"],
            ["2s", "2p"],
            ["3s", "3p"],
            ["4s", "3d", "4p"],
            ["5s", "4d", "5p"],
            ["6s", "4f", "5d", "6p"],
            ["7s", "5f", "6d", "7p"]
        ];
        
        let positions = [];
        let electrons = 0;
        let maxElectrons = { "s": 2, "p": 6, "d": 10, "f": 14 };
        
        function setup() {
            createCanvas(500, 500);
            textSize(16);
            calculatePositions();
            noLoop();
        }
        
        function calculatePositions() {
            positions = [];
            let startX = 100;
            let startY = 50;
            let yOffset = 50;
            for (let i = 0; i < orbitals.length; i++) {
                let row = orbitals[i];
                for (let j = 0; j < row.length; j++) {
                    let x = startX + j * 60;
                    let y = startY + i * yOffset;
                    positions.push({ x, y, label: row[j], filled: 0 });
                }
            }
        }
        
        function draw() {
            background(255);
            textAlign(CENTER, CENTER);
            
            // Σχεδίαση των βελών Aufbau (όπως ήταν)
            stroke(200, 0, 0);
            strokeWeight(2);
            for (let i = 0; i < positions.length - 1; i++) {
                let start = positions[i];
                let end = positions[i + 1];
                if (start.y < end.y) {
                    let midX = (start.x + end.x) / 2;
                    let midY = (start.y + end.y) / 2;
                    line(start.x, start.y, midX, midY);
                    line(midX, midY, end.x, end.y);
                }
            }
            
            noStroke();
            // Σχεδίαση των ορθογωνίων και κειμένου: για τα p orbitals, ο εκθέτης εμφανίζεται πράσινος και σε μικρότερο μέγεθος.
            for (let pos of positions) {
                rectMode(CENTER);
                fill(200);
                rect(pos.x, pos.y, 50, 30);
                // Ελέγχουμε αν υπάρχουν ηλεκτρόνια και αν το orbital είναι p\n                if (pos.filled > 0 && pos.label.slice(-1) === "p") {\n                    // Σχεδίαση του βασικού label\n                    fill(0);\n                    text(pos.label, pos.x - 10, pos.y);\n                    // Σχεδίαση του εκθέτη με πράσινο και μικρότερο μέγεθος\n                    fill(0, 128, 0);\n                    textSize(12);\n                    text(pos.filled, pos.x + 10, pos.y - 8);\n                    textSize(16);\n                } else {\n                    fill(0);\n                    let textLabel = pos.filled > 0 ? pos.label + \" \" + pos.filled : pos.label;\n                    text(textLabel, pos.x, pos.y);\n                }\n            }\n        }\n        
        function startFilling() {\n            let atomicNumber = parseInt(document.getElementById(\"atomicNumber\").value);\n            electrons = atomicNumber;\n            for (let i = 0; i < positions.length; i++) {\n                let orbitalType = positions[i].label.slice(-1);\n                let maxFill = maxElectrons[orbitalType] || 2;\n                let fillAmount = Math.min(electrons, maxFill);\n                positions[i].filled = fillAmount;\n                electrons -= fillAmount;\n                if (electrons <= 0) break;\n            }\n            redraw();\n        }\n    </script>\n</body>\n</html>"}
